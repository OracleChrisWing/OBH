function loadImage(e){$("#image_container").html(""),$("#image_container").append("<img id='image_overlay' src='images/content_frames/frame_"+e+".png' onclick='off()'></img>")}function on(e){document.getElementById("overlay").style.display="block",loadImage(e),$(".pause-play").click()}function off(){document.getElementById("overlay").style.display="none",$(".pause-play").click()}$(document).ready(function(){var e=0,t=.1,n=0,a=$(".bar"),l=$(".bar-marker");function i(){a.width();n<100&&(n+=t,a.css("width",n+"%"),n<88&&l.css("margin-left",n+"%"))}var m=[],c=[],s=[];$.ajax({type:"GET",url:"Data/Run_1/car_data.csv",dataType:"text",success:function(e){!function(e){for(var t=e.split(/\r\n|\n/),n=t[0].split(","),a=[],l=1;l<t.length;l++){var i=t[l].split(",");if(i.length==n.length){for(var s=[],o=0;o<n.length;o++)s.push(i[o]);a.push(s)}}var u=function(e){for(var t=e.length,n=[],a=[],l=0;l<t;l++){var i=String(e[l]),m=i.split(",");n.push(m[0]),a.push(m[1])}return[n,a]}(a);m=u[0],c=u[1]}(e)},async:!1});var o=document.getElementById("v1"),u=document.getElementById("v2"),r=document.getElementById("v3");o.volume=0,u.volume=o.volume,r.volume=o.volume;var p=0;window.setInterval(function(){$(".output").html()!=p&&(p=parseInt($(".output").html())/100,o.volume=p)},500);var d=null,g=o.duration,y=null,v=!1;function h(){o.paused||v||($(".pause-play").html("<img src='images/play-button.png'></img>"),document.getElementById("v1").pause(),document.getElementById("v2").pause(),document.getElementById("v3").pause())}o.onplaying=function(){!0,v=!1},o.onpause=function(){!1,v=!0};var f=!0,I=!0,E=1;function _(){if(e<c.length){var t=c[e];s[e]=t,$(".speed_indicator").html(Math.round(t,0)+" mph"),e++,B=new Chartist.Line(".ct-chart",{labels:m,series:[s]},{low:0})}}$(".pause-play").on("click",function(e){null==y?(plotter=setInterval(_,900),f=window.setInterval(i,50),$("#showFacts").is(":checked")&&(k(),I=setInterval(k,3e3)),document.getElementById("v1").play(),document.getElementById("v2").play(),document.getElementById("v3").play(),y=!0,$(this).html("<img src='images/pause-button.png'></img>")):y?y&&(clearInterval(plotter),clearInterval(f),clearInterval(I),h(),y=!1,$(this).html("<img src='images/play-button.png'></img>")):(plotter=setInterval(_,900),f=window.setInterval(i,50),$("#showFacts").is(":checked")&&(k(),I=setInterval(k,3e3)),$(".pause-play").html("<img src='images/pause-button.png'></img>"),document.getElementById("v1").play(),document.getElementById("v2").play(),document.getElementById("v3").play(),y=!0,$(this).html("<img src='images/pause-button.png'></img>"))}),$(".restart").on("click",function(t){s=[],e=0,$(".speed_indicator").html("0 mph"),B=new Chartist.Line(".ct-chart",{labels:m,series:[s]},{low:0}),$(".bar").css("width","0%"),$(".bar-marker").css("margin-left","0%"),n=0,document.getElementById("v1").pause(),document.getElementById("v2").pause(),document.getElementById("v3").pause(),o.currentTime=0,u.currentTime=0,r.currentTime=0,y?(document.getElementById("v1").play(),document.getElementById("v2").play(),document.getElementById("v3").play(),$(".pause-play").html("<img src='images/pause-button.png'></img>"),y=!0,E=1):($(".pause-play").html("<img src='images/play-button.png'></img>"),y=!1,E=1)}),$("#v1").on("timeupdate",function(e){d=this.currentTime,$(".time_indicator").text(Math.round(d)+" (s)"),d==g-1&&$(".pause-play").html("<img src='images/play-button.png'></img>")}),$("#sec_1").on("click",function(e){h();var t=d,n=$(this).find("#div_1 video")[0],a=$(".main_feed video")[0],l=n.src,i=a.src,m=$(this).find(".video_desc").html(),c=$("#v1-desc").val(),s=m;n.src=i,a.src=l,$("#v2-desc-container").text(c),$("#v1-desc").val(s),n.load(),a.load(),o.currentTime=t,u.currentTime=null,r.currentTime=null,$("#toggleAutoplay").is(":checked")?(document.getElementById("v1").play(),document.getElementById("v2").play(),document.getElementById("v3").play(),y?$(".pause-play").html("<img src='images/pause-button.png'></img>"):($(".pause-play").click(),$(".pause-play").html("<img src='images/pause-button.png'></img>"))):y&&($(".pause-play").click(),$(".pause-play").html("<img src='images/play-button.png'></img>"))}),$("#sec_2").on("click",function(e){h();var t=d,n=$(this).find("#div_2 video")[0],a=$(".main_feed video")[0],l=n.src,i=a.src,m=$(this).find(".video_desc").html(),c=$("#v1-desc").val(),s=m;n.src=i,a.src=l,$("#v3-desc-container").text(c),$("#v1-desc").val(s),n.load(),a.load(),o.currentTime=t,u.currentTime=null,r.currentTime=null,$("#toggleAutoplay").is(":checked")?(document.getElementById("v1").play(),document.getElementById("v2").play(),document.getElementById("v3").play(),y?$(".pause-play").html("<img src='images/pause-button.png'></img>"):($(".pause-play").click(),$(".pause-play").html("<img src='images/pause-button.png'></img>"))):y&&($(".pause-play").click(),$(".pause-play").html("<img src='images/play-button.png'></img>"))});var B=new Chartist.Line(".ct-chart",{labels:m,series:[s]},{low:0}),b=0;function k(){12==E&&clearInterval(I),$(".fact-popups").append("<div id='content_frame_"+E+"' class='content'><a href='#' class='image_capture' id='content_frames/frame_"+E+".png' onclick='on("+E+")'><img src='images/content_frames/frame_"+E+".png'></img></a></div>"),$("#content_frame_"+E).fadeOut(7e3),E+=1}B.on("created",function(){b=0}),B.on("draw",function(e){"line"===e.type?e.element.animate({opacity:{begin:100*b+1e3,dur:1e3,from:0,to:1}}):"point"===e.type&&(b++,e.element.animate({opacity:{begin:100*b,dur:1e4,from:0,to:1,easing:"easeOutQuart"}}))})});